os: linux
language: generic
services:
  - docker

if: branch = master

matrix:
  include:
    - os: linux
      env:
        - DOCKER_REPO=triggerhappy/commitlint
        - WORKING_DIR=commitlint
    - os: linux
      env:
        - DOCKER_REPO=triggerhappy/auto-changelog
        - WORKING_DIR=auto-changelog
    - os: linux
      env:
        - DOCKER_REPO=triggerhappy/cppdev
        - WORKING_DIR=cppdev
    - os: linux
      env:
        - DOCKER_REPO=triggerhappy/slatedocs
        - WORKING_DIR=slatedocs
    - os: linux
      env:
        - DOCKER_REPO=triggerhappy/storj-gateway
        - WORKING_DIR=storj-gateway

before_script:
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin

script:
  - cd $WORKING_DIR
  - docker build . -t $DOCKER_REPO:latest
  - docker push $DOCKER_REPO:latest
